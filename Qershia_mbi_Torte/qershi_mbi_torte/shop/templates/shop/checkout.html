{% extends "shop/navbar_footer.html" %}
{% load static %}

{% block content %}
<style>
 .checkout-container {
  max-width: 500px;
  width: 90%;
  margin: 60px auto;
  padding: 30px;
  background: #fff;
  border-radius: 25px;
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}

.checkout-container:hover {
  transform: translateY(-5px);
  box-shadow: 0 12px 30px rgba(0,0,0,0.2);
}

.checkout-container h1 {
  text-align: center;
  margin-bottom: 30px;
  font-family: 'Pacifico', cursive; /* font më elegant */
  color: #c33;
}

.checkout-container form label {
  display: block;
  margin-top: 15px;
  font-weight: bold;
}

.checkout-container form input,
.checkout-container form select {
  width: 100%;
  padding: 12px;
  margin-top: 5px;
  border-radius: 12px; /* input gjithashtu me skaje të buluara */
  border: 1px solid #ccc;
  transition: border 0.3s ease;
}

.checkout-container form input:focus,
.checkout-container form select:focus {
  border-color: #c33;
  outline: none;
}

.checkout-container form button {
  margin-top: 20px;
  width: 100%;
  padding: 14px;
  background: #c33;
  color: white;
  border: none;
  border-radius: 12px; /* buton me skaje të buluara */
  cursor: pointer;
  font-size: 1em;
  transition: background 0.3s ease, transform 0.2s ease;
}

.checkout-container form button:hover {
  background: #a22;
  transform: scale(1.02);
}

</style>

<div class="checkout-container">
  <h1>Confirm your order:</h1>
  <!-- Përmbledhja e produkteve -->
  <div class="order-summary">
    <h2>Your Order:</h2>
    <ul>
      {% for item in order.items.all %}
        <li style="margin-bottom: 15px; list-style: none; display: flex; align-items: center;">
          <!-- Foto e produktit -->
          {% if item.product.image %}
            <img src="{{ item.product.image.url }}" alt="{{ item.product.name }}"
                 style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; margin-right: 15px;">
          {% endif %}

          <div>
            <strong>{{ item.product.name }}</strong><br>
            Quantity: {{ item.quantity }} × {{ item.product.price }} Lekë =
            <strong>{{ item.subtotal }} L</strong>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>

  <p><strong>Total: </strong> {{ order.total_price }} Lekë</p>
  <form method="post" action="{% url 'checkout' order.id %}">
    {% csrf_token %}

    <label for="payment_method">Choose a payment option:</label><br>
    <select name="payment_method" id="payment_method" required>
      <option value="" disabled selected>-- Choose an option --</option>
      <option value="bank">Bank Transfer</option>
      <option value="cash">Cash on Delivery</option>
    </select>

    <br><br>
    <button type="submit">Confirm & Pay</button>
  </form>
</div>
{% endblock %}
